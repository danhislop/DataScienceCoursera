<!DOCTYPE html>
<!-- cse6242 -->

<!-- run: http-server & -->

<head>

</div>
    <title>Running Total of TMDb Movies by Year</title>
    <style type="text/css">

        div.bar {
            display: inline-block;
            margin-right: 5px;
            width: 20px;
            height: 75px;	/* Gets overridden by D3-assigned height below */
            background-color: teal;
        }

        div.text {
            id: "credit"
        }
    
    </style>
</head>

<body>

  <script src="lib/d3/d3.min.js"></script>
  <script src="lib/d3-dsv/d3-dsv.min.js"></script>
  <script src="lib/d3-fetch/d3-fetch.min.js"></script>


    <script type="text/javascript">
        //Width and height
        var w = 500;
        var h = 100;
        var barPadding = 1; 
        var svg = d3.select("body")
        .append("svg")
        .attr("width", w)
        .attr("height", h);

        // define function to parse time in years format
        var parseTime = d3.timeParse("%Y");
        var pathToCsv = "q3.csv";		// path to csv
        var dataset = d3.dsv(",", pathToCsv, function (d) {
        return {
            year: parseTime(d.year),
            /* year: new Date(+d.year, 0, 1), */
            running_total: +d.running_total
        }
        }).then(function (dataset) {
            return svg.selectAll("rect")
        .data(dataset)
        .enter()
        .append("rect")
        .attr("x", function(d,i) {
            return i * (w / dataset.length);
        })
        .attr("y", function(d,i) {
            return h - (i * 4);
        })
        .attr("width", w / dataset.length - barPadding)
        .attr("height", function(d,i) {
                return i
        })
        .attr("fill", "teal")
    });
    var text = "dhislop3";

    </script>
</body>
